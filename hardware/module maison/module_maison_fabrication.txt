
# ğŸ  Module Maison - Dossier de Fabrication Officiel (Base Z.A.R. - Zone Antizombie RÃ©sidente)

**Code de projet** : UNIT-B001  
**RÃ´le** : QG LoRa familial, passerelle de survie, centre de traitement et dâ€™alerte  
**Statut** : Fixe, autonome, multitÃ¢che  
**Version** : Apocalypse-Ready v3.0

---

## ğŸ¯ Objectif du module

Offrir Ã  la cellule familiale une **base fixe et intelligente** pour :
- Recevoir les messages et positions de tous les modules (humains, chiens, enfants, vÃ©hiculesâ€¦)
- Surveiller les zones critiques avec des flows automatisÃ©s (Node-RED)
- Visualiser lâ€™activitÃ© via des dashboards (Grafana)
- Alerter en cas dâ€™Ã©vÃ©nement (fugue, intrusion, fin du stock de croquettes)
- Servir de relais MQTT/LoRa, mÃªme en lâ€™absence dâ€™internet

---

## ğŸ”© Composants nÃ©cessaires

- 1x Raspberry Pi (Pi 3B+, Pi 4, Pi 5 recommandÃ©)
- 1x ClÃ© LoRa (USB Heltec, RFM95 + adaptateur, ou T-Beam branchÃ© en USB)
- 1x Carte microSD rapide (ou SSD/NVMe si dispo)
- 1x Connexion rÃ©seau (Wi-Fi, Ethernet, fallback)
- 1x Panneau solaire avec batterie (optionnel, recommandÃ© pour autonomie)
- 1x BoÃ®tier avec aÃ©ration (le Pi, Ã§a chauffe quand yâ€™a des alertes zombies)

---

## ğŸ§° Logiciels Ã  dÃ©ployer

- **Mosquitto** (broker MQTT)
- **Node-RED** (flows de logique et alertes)
- **Grafana** (dashboards GPS, Ã©nergie, capteurs)
- **InfluxDB** (stockage des donnÃ©es)
- **Meshtastic-Gateway** (relais LoRa â†” MQTT)
- **Suricata** (optionnel : surveillance rÃ©seau)
- **ATAK-Server** (optionnel : cartographie tactique ATAK)

Tous ces services sont conteneurisables (via Docker/Podman).

---

## ğŸ§ª FonctionnalitÃ©s principales

- Collecte de donnÃ©es GPS et capteurs (via MQTT Meshtastic)
- Analyse des positions par Node-RED pour dÃ©tecter :
  - Sortie de zone (gÃ©ofence)
  - ArrÃªt de signal (module perdu)
  - Batterie faible
- Envoi dâ€™alertes sur canaux Telegram, mail, push, etc.
- Affichage sur Ã©cran local ou accÃ¨s distant par navigateur

---

## âš™ï¸ CÃ¢blage & interfaces

- LoRa via port USB (ttyUSB0 â†’ Meshtastic-Gateway)
- Capteurs optionnels : tempÃ©rature, prÃ©sence, PIR via GPIO (si utilisÃ©)
- Ã‰cran HDMI pour console ou Ã©cran LCD TFT SPI (pour info locale)
- Bouton dâ€™arrÃªt sÃ©curisÃ© sur GPIO (ou bouton rouge de panique)

---

## ğŸ“¦ BoÃ®tier conseillÃ©

- BoÃ®tier imprimÃ© ou recyclÃ© (ancienne box, Tupperware de lâ€™apocalypse)
- AÃ©ration passive ou mini-ventilo 5V
- Antenne LoRa sortie externe (gain recommandÃ©)
- AccÃ¨s facile aux ports (USB, microSD)

---

## ğŸ” ParamÃ©trage logiciel

- MQTT bridge configurÃ© pour Ã©couter le canal FAMILIA (0) et tous les autres
- Node-RED : flows pour chaque module identifiÃ©
- Grafana : dashboards en lecture seule pour visualiser tout le rÃ©seau
- Meshtastic-Gateway en mode relais + logs en local
- Sauvegarde quotidienne des donnÃ©es InfluxDB vers stockage externe

---

## â˜€ï¸ Autonomie Ã©nergÃ©tique (optionnel mais classe)

- Panneau solaire 6â€“12V
- ContrÃ´leur de charge
- Batterie LiFePOâ‚„ ou power bank solide
- RÃ©gulateur 5V vers Pi (USB ou GPIO)

---

## ğŸ§Ÿâ€â™‚ï¸ Recommandations tactiques

- Placer la base dans une zone semi-centrale avec visibilitÃ© LoRa maximale
- PrÃ©voir une antenne dÃ©portÃ©e si murs blindÃ©s (ou voisins hostiles)
- En cas de panne complÃ¨te, laisser une LED verte visible : â€œon est encore vivantsâ€
- Nommer le Pi `BASE_CASTILLO` ou `FORTRESS_MAIN` dans le canal CASTILLO

---

